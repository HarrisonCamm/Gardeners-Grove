<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" context="text/html; charset=UTF-8">
    <title>Reset Password</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            padding-top: 5%;
        }
        .error, .form-control {
            width: 300px;
            font-size: 100%;
        }
        .error {
            border-radius: 2px;
            border: 1px solid red;
            outline: 1px solid red;
        }
        .error:focus {
            outline: 2px solid red;
        }
        .error-message {
            color: red;
            display: block;
            width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        button, label {
            font-size: 120%;
        }
        .buttons {
            display: flex;
            justify-content: flex-end;
        }
        h2 {
            text-align: center;
        }
        .link {
            font-size: 120%;
        }
        @media only screen and (orientation: portrait) {
            h2 {
                font-size: 300%;
            }
            button {
                font-size: 200%;
            }
            label {
                font-size: 200%;
            }
            .form-control {
                font-size: 180%;
                width: 540px;
                border: 2px solid;
                border-radius: 2px;
            }
            .form-control[disabled] {
                border-color: #ccc;
            }
            .error {
                font-size: 180%;
                width: 540px;
                border: 2px solid red;
                border-radius: 2px;
                outline: 2px solid red;
            }
            .error:focus {
                outline: 4px solid red;
            }
            .error-message {
                width: 540px;
                font-size: 150%;
            }
            .link {
                font-size: 200%;
            }
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('form').addEventListener('keydown', function(event) {
                let submitButton = document.getElementById("submitNewPasswordButton");
                if (event.key === 'Enter' && document.activeElement !== submitButton) {
                    event.preventDefault();
                    return false;
                }
            });
        });
    </script>
</head>
<body>
    <h2>Reset Your Password</h2>
    <div>
        <form id="resetPasswordForm" th:action="@{/reset-password-form}" method="post" novalidate>
            <input type="hidden" id="changePasswordFormInput" th:name="changePasswordFormInput" th:value="${changePasswordFormInput}" >
            <!-- Hidden Change Password Form -->
            <div id="changePasswordForm">

                <!-- New Password Field -->
                <label for="newPassword">New Password:</label>
                <br/>
                <input type="password" id="newPassword" name="newPassword" class="form-control" th:value="${newPassword}" th:classappend="${newPasswordError != null ? 'error' : ''}">
                <!-- Placeholder for New Password Validation Error -->
                <div class="error-message" th:if="${newPasswordError}" th:text="${newPasswordError}"></div>
                <br/>
                <br/>

                <!-- Retype New Password Field -->
                <label for="retypedPassword">Retype New Password:</label>
                <br/>
                <input type="password" id="retypedPassword" name="retypedPassword" class="form-control" th:value="${retypedPassword}" th:classappend="${passwordMatchError != null ? 'error' : ''}">
                <!-- Placeholder for Password Match Error -->
                <div class="error-message" th:if="${passwordMatchError}" th:text="${passwordMatchError}"></div>
                <br/>
                <br/>

                <!-- Submit Changed Password Button -->
                <div class="buttons">
                    <button type="submit" id="submitNewPasswordButton">Change Password</button>
                    &nbsp;
                </div>
            </div>
        <!-- End Change Password Section -->
        </form>
    </div>

</body>
</html>